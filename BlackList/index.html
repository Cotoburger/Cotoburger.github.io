<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="Schedule">
    <meta property="og:description" content="My BlackList">
    <meta property="og:image" content="https://cotoburger.github.io/School1//images/icon.png">
    <meta property="og:url" content="https://cotoburger.github.io/School1/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Schedule">
    <meta name="twitter:description" content="My BlackList">
    <meta name="twitter:image" content="https://cotoburger.github.io/School1//images/icon.png">
    <meta name="twitter:url" content="https://cotoburger.github.io/School1/">
    <title>Расписание звонков</title>
    <link rel="icon" href="images/icon.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="styles.css">

</head>
<body>
    <div class="nav" id="nav">Black List</div>
    <div class="grid" id="blacklist"></div>
    <script>
        async function loadBlacklist() {
    try {
        let response = await fetch('blacklist.txt');
        let data = await response.json();
        let container = document.getElementById('blacklist');
        container.innerHTML = '';
        
        for (let i = 0; i < data.length; i++) {
            let person = data[i];
            let card = document.createElement('div');
            card.classList.add('card');
            card.style.opacity = 0; // Начальное состояние скрыто
            card.style.transform = 'translateY(20px)'; // Начальное положение вниз
            card.style.position = 'relative'; // Для правильного размещения заглушки

            // Заглушка (будет занимать место внутри карточки)
            let placeholder = document.createElement('div');
            placeholder.classList.add('placeholder');
            card.appendChild(placeholder);

            let img = new Image();
            img.classList.add('avatar');
            img.src = person.avatar;
            img.alt = "Аватар";
            
            let info = document.createElement('div');
            info.classList.add('info');
            info.innerHTML = `
                <div class="name">${person.name}</div>
                <div class="reason">${person.reason}</div>
            `;
            
            card.appendChild(img);
            card.appendChild(info);
            container.appendChild(card);
            
            // Применим анимацию ко всем карточкам после их добавления в DOM
            await new Promise(resolve => {
                img.onload = () => {
                    // Даем время для обновления DOM перед анимацией
                    setTimeout(() => {
                        // Скрываем заглушку, показываем картинку
                        placeholder.style.display = 'none';
                        
                        // Применяем анимацию
                        card.style.transition = 'opacity 0.5s, transform 0.5s'; // Плавная анимация
                        card.style.opacity = 1; // Карточка становится видимой
                        card.style.transform = 'translateY(0)'; // Карточка двигается в исходное положение
                        resolve();
                    }, 50); // Маленькая задержка
                };
                img.onerror = resolve; // В случае ошибки загрузки, продолжаем
            });
        }
    } catch (error) {
        console.error("Ошибка загрузки списка", error);
    }
}

loadBlacklist();

    </script>
</body>
</html>